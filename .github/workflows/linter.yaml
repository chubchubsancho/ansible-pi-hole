name: linter

on:
  pull_request:

jobs:
  checkout:
    runs-on: ubuntu-20.04
    steps:
      - uses: actions/checkout@v2
  lint:
    runs-on: ubuntu-20.04
    needs: checkout
    container:
      image: quay.io/ansible/toolset:3.5.0
      env:
        image: ubuntu
        version: 20.04
      # volumes:
      #   - /var/run/docker.sock:/var/run/docker.sock
      # options: --volume ${{ github.workspace }}:/tmp/${{ github.workspace }}:Z --workdir /tmp/${{ github.workspace }}
    steps:
      - name: molecule lint
        run: |
          pwd & \
          ls -la . & \
          molecule lint
